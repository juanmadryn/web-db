DROP VIEW IF EXISTS `inventario`.`articulos_comprados`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `inventario`.`articulos_comprados` AS select `d`.`detalle_SC_id` AS `detalle_SC_id`,`d`.`solicitud_compra_id` AS `solicitud_compra_id`,`d`.`orden_compra_id` AS `orden_compra_id`,`d`.`cantidad_pedida` AS `cantidad_pedida`,`d`.`cantidad_recibida` AS `cantidad_recibida`,`o`.`estado` AS `estado`,`a`.`nombre` AS `nombre`,`a`.`descripcion` AS `descripcion`,`d`.`descripcion` AS `descripcion_completa`,`o`.`entidad_id_proveedor` AS `entidad_id_proveedor`,`e`.`nombre` AS `proveedor_nombre`,`o`.`fecha` AS `fecha`,`c`.`user_id` AS `user_id_comprador`,`c`.`nombre_completo` AS `comprador`,`u`.`user_id` AS `user_id_solicitante`,`u`.`nombre_completo` AS `solicitante` from ((((((`inventario`.`detalle_sc` `d` join `inventario`.`ordenes_compra` `o` on((`d`.`orden_compra_id` = `o`.`orden_compra_id`))) join `inventario`.`articulos` `a` on((`d`.`articulo_id` = `a`.`articulo_id`))) join `infraestructura`.`entidad_externa` `e` on((`o`.`entidad_id_proveedor` = `e`.`entidad_id`))) join `inventario`.`compradores` `c` on((`o`.`user_id_comprador` = `c`.`user_id`))) join `inventario`.`solicitudes_compra` `s` on((`d`.`solicitud_compra_id` = `s`.`solicitud_compra_id`))) join `inventario`.`solicitantes` `u` on((`s`.`user_id_solicita` = `u`.`user_id`))) where `o`.`estado` LIKE '0008.0006' AND ((`d`.`cantidad_pedida` > `d`.`cantidad_recibida`) or isnull(`d`.`cantidad_recibida`));